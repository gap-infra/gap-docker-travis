language: c

branches:
  only:
    - master

env:
  global:
    - GAPCONTAINER="gapsystem/gap-docker"

services:
  - docker

before_install:
  - docker pull ${GAPCONTAINER}

script:
  - docker version
  - docker run -v $PWD:/home/gap/travis/ ${GAPCONTAINER} /bin/sh -c 'cd ${GAP_HOME} && make testpackagesload && /home/gap/travis/postrun.sh'
